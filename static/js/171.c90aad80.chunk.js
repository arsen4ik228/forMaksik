"use strict";(self.webpackChunkgood_management=self.webpackChunkgood_management||[]).push([[171],{1268:(e,s,o)=>{o.d(s,{A:()=>c});o(5043);const l={editText:"BottomHeaders_editText__BUuuG"},i={wrapper:"ButtonAction_wrapper__S7EYo"};var t=o(3732),n=o(4530),a=o(9307),r=o(579);function d(e){let{create:s,update:o}=e;return(0,r.jsxs)("div",{className:i.wrapper,children:[s&&(0,r.jsx)(a.A,{name:"\u0441\u043e\u0437\u0434\u0430\u0442\u044c",icon:t.A,onClick:s}),o&&(0,r.jsx)(a.A,{name:"\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c",icon:n.A,onClick:o})]})}function c(e){let{children:s,create:o,update:i}=e;return(0,r.jsxs)("div",{className:l.editText,children:[s,(0,r.jsx)(d,{create:o,update:i})]})}},2171:(e,s,o)=>{o.r(s),o.d(s,{default:()=>B});var l=o(5043);const i={dialog:"CompanySchema_dialog__JsnIw",main:"CompanySchema_main__RP111",header:"CompanySchema_header__zMrnT",boldText:"CompanySchema_boldText__dP0i3",wrapper:"CompanySchema_wrapper__KbKSe"};var t=o(3216),n=o(3536),a=o.n(n),r=o(9498),d=o(7643),c=o(1268),m=o(71);o(6537);const h={wrapper:"PostSchema_wrapper__MkhCt",block:"PostSchema_block__Ed85x",nameBlock:"PostSchema_nameBlock__DZl2C",childBlock:"PostSchema_childBlock__p5DXw",customScrollbar:"PostSchema_customScrollbar__LPCZb",customScrollbarThumb:"PostSchema_customScrollbarThumb__wj4WA"};var u=o(5206),p=o(8757),v=o(579);const x=e=>{let{post:s,level:o=1,baseColor:l,setOnePost:i,setViewChildrenPost:t,setHeader:n}=e;const r=(0,p.Zt)(l,.2*o);return(0,v.jsxs)("div",{className:h.childBlock,style:{backgroundColor:r},children:[(0,v.jsxs)("div",{className:h.nameBlock,children:[(0,v.jsx)(u.Ay,{type:"link",onClick:e=>{((e,o)=>{var l,d,c,m;e.stopPropagation();const h=a().cloneDeep(o);h.color=r,console.log(h),i([h]),n({postName:null!==(l=null===s||void 0===s?void 0:s.postName)&&void 0!==l?l:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e",divisionName:null!==(d=null===s||void 0===s?void 0:s.divisionName)&&void 0!==d?d:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e",fullName:null!==s&&void 0!==s&&s.user?`${null!==(c=s.user.firstName)&&void 0!==c?c:""} ${null!==(m=s.user.lastName)&&void 0!==m?m:""}`.trim():"\u041d\u0435\u0442 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),t(!0)})(e,s)},children:null===s||void 0===s?void 0:s.divisionName}),(0,v.jsx)("h2",{children:s.postName}),s.user?(0,v.jsxs)("h3",{children:[null===s||void 0===s?void 0:s.user.firstName," ",null===s||void 0===s?void 0:s.user.lastName]}):(0,v.jsx)("h3",{children:"\u041f\u043e\u0441\u0442 \u0441\u0432\u043e\u0431\u043e\u0434\u0435\u043d"})]}),(null===s||void 0===s?void 0:s.children.length)>0&&(0,v.jsx)("div",{className:h.childBlock,children:s.children.map((e=>(0,v.jsx)(x,{post:e,level:o>2?1:o+1,baseColor:l,setOnePost:i,setViewChildrenPost:t,setHeader:n},e.id)))})]})};function j(e){var s,o;let{post:l,backgroundColor:i,setOnePost:t,setViewChildrenPost:n,setHeader:r}=e;return(0,v.jsx)("div",{className:h.wrapper,style:{backgroundColor:i},children:(0,v.jsxs)("div",{className:h.block,style:{backgroundColor:i},children:[(0,v.jsx)("div",{style:{display:"flex",justifyContent:"space-between",cursor:"pointer"}}),(0,v.jsxs)("div",{className:h.nameBlock,children:[(0,v.jsx)(u.Ay,{type:"link",onClick:()=>{(e=>{var s,o,d,c;const m=a().cloneDeep(e);m.color=i,console.log(m),t([m]),r({postName:null!==(s=null===l||void 0===l?void 0:l.postName)&&void 0!==s?s:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e",divisionName:null!==(o=null===l||void 0===l?void 0:l.divisionName)&&void 0!==o?o:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e",fullName:null!==l&&void 0!==l&&l.user?`${null!==(d=l.user.firstName)&&void 0!==d?d:""} ${null!==(c=l.user.lastName)&&void 0!==c?c:""}`.trim():"\u041d\u0435\u0442 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),n(!0)})(l)},children:null===l||void 0===l?void 0:l.divisionName}),(0,v.jsx)("h2",{children:null===l||void 0===l?void 0:l.postName}),(null===l||void 0===l?void 0:l.user)&&(0,v.jsxs)("h3",{children:[null===l||void 0===l||null===(s=l.user)||void 0===s?void 0:s.firstName," ",null===l||void 0===l||null===(o=l.user)||void 0===o?void 0:o.lastName]})]}),(null===l||void 0===l?void 0:l.children.length)>0&&(0,v.jsx)("div",{className:h.childBlock,children:null===l||void 0===l?void 0:l.children.map((e=>(0,v.jsx)(x,{post:e,baseColor:i,setOnePost:t,setViewChildrenPost:n,setHeader:r},e.id)))})]})})}const N="BlockSchema_wrapper__o1Gp+",g="BlockSchema_block__+4XFK",C="BlockSchema_nameBlock__q8ajZ",_="BlockSchema_childBlock__T+hCE";var y=o(8345),k=o(6282),b=o(2469);const P=e=>{let{post:s,level:o=1,baseColor:l,setOnePost:i,setViewChildrenPost:t,setHeader:n}=e;const r=(0,p.Zt)(l,.2*o);return(0,v.jsxs)("div",{className:_,style:{backgroundColor:r},children:[(0,v.jsxs)("div",{className:C,children:[(0,v.jsx)(b.A,{postId:s.id}),(0,v.jsx)(u.Ay,{type:"link",onClick:e=>{((e,o)=>{var r,d,c,m;e.stopPropagation();const h=a().cloneDeep(o);h.color=l,console.log(h),i([h]),n({postName:null!==(r=null===s||void 0===s?void 0:s.postName)&&void 0!==r?r:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e",divisionName:null!==(d=null===s||void 0===s?void 0:s.divisionName)&&void 0!==d?d:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e",fullName:null!==s&&void 0!==s&&s.user?`${null!==(c=s.user.firstName)&&void 0!==c?c:""} ${null!==(m=s.user.lastName)&&void 0!==m?m:""}`.trim():"\u041d\u0435\u0442 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),t(!0)})(e,s)},children:s.divisionName}),(0,v.jsx)("h2",{children:s.postName}),s.user?(0,v.jsxs)("h3",{children:[s.user.firstName," ",s.user.lastName]}):(0,v.jsx)("h3",{children:"\u041f\u043e\u0441\u0442 \u0441\u0432\u043e\u0431\u043e\u0434\u0435\u043d"})]}),s.children.length>0&&(0,v.jsx)("div",{className:_,children:s.children.map((e=>(0,v.jsx)(P,{post:e,level:o>2?1:o+1,baseColor:l,setOnePost:i,setViewChildrenPost:t,setHeader:n},e.id)))})]})};function w(e){let{post:s,arrayColors:o,setArrayColors:i,setOnePost:t,setViewChildrenPost:n,setHeader:r}=e,d=o.get(s.id);const[c,m]=(0,l.useState)(null);return(0,v.jsx)("div",{className:N,style:{backgroundColor:c||d},children:(0,v.jsxs)("div",{className:g,style:{backgroundColor:c||d},children:[(0,v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",cursor:"pointer"},children:[(0,v.jsx)(k.A,{placement:"topLeft",content:(0,v.jsx)(p.Jz,{onColorSelect:e=>{m(e),i((o=>{const l=new Map(o);return l.set(s.id,e),l}))},selectedColor:c,colorFromBD:d}),children:(0,v.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:(0,v.jsx)("img",{src:y.A,alt:"palette",width:"30px",height:"30px"})})}),(0,v.jsx)(b.A,{postId:s.id})]}),(0,v.jsxs)("div",{className:C,children:[(0,v.jsx)(u.Ay,{type:"link",onClick:()=>{(e=>{var o,l,i,m;const h=a().cloneDeep(e);h.color=c||d,console.log(h),t([h]),r({postName:null!==(o=null===s||void 0===s?void 0:s.postName)&&void 0!==o?o:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e",divisionName:null!==(l=null===s||void 0===s?void 0:s.divisionName)&&void 0!==l?l:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e",fullName:null!==s&&void 0!==s&&s.user?`${null!==(i=s.user.firstName)&&void 0!==i?i:""} ${null!==(m=s.user.lastName)&&void 0!==m?m:""}`.trim():"\u041d\u0435\u0442 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),n(!0)})(s)},children:s.divisionName}),(0,v.jsx)("h2",{children:s.postName}),s.user&&(0,v.jsxs)("h3",{children:[s.user.firstName," ",s.user.lastName]})]}),s.children.length>0&&(0,v.jsx)("div",{className:_,children:s.children.map((e=>(0,v.jsx)(P,{post:e,baseColor:c||d,setOnePost:t,setViewChildrenPost:n,setHeader:r},e.id)))})]})})}var f=o(135),S=o(1638),A=o(8877);const O=e=>{let{posts:s,arrayColors:o,setArrayColors:l,setOnePost:t,setViewChildrenPost:n,setHeader:a}=e;const r=(0,p.H6)(s);return console.log(r),(0,v.jsx)("div",{className:i.wrapper,children:r.map((e=>(0,v.jsx)(w,{post:e,arrayColors:o,setArrayColors:l,setOnePost:t,setViewChildrenPost:n,setHeader:a},e.id)))})};function B(){var e,s;const{organizationId:o}=(0,t.g)(),n=(0,t.Zp)(),h=()=>{n("/pomoshnik/companySchema")},{allPosts:u=[],isLoadingGetPosts:p,isFetchingGetPosts:x,isErrorGetPosts:N}=(0,A.iV)({organizationId:o,structure:!0}),{currentOrganization:g,isLoadingOrganizationId:C,isFetchingOrganizationId:_}=(0,A.nU)({organizationId:o}),{updateOrganization:y,isLoadingUpdateOrganizationMutation:k,isSuccessUpdateOrganizationMutation:b,isErrorUpdateOrganizationMutation:P,ErrorOrganization:w,localIsResponseUpdateOrganizationMutation:B}=(0,A.YK)(),[z,H]=(0,l.useState)([]),[E,I]=(0,l.useState)([]),[V,T]=(0,l.useState)(new Map),[F,M]=(0,l.useState)(!1),[D,$]=(0,l.useState)({postName:"",divisionName:"",fullName:""});(0,l.useEffect)((()=>{a().isEqual(z,u)||H(a().cloneDeep(u))}),[u]),(0,l.useEffect)((()=>{null!==g&&void 0!==g&&g.colorCodes&&"object"===typeof g.colorCodes&&T(new Map(Object.entries(g.colorCodes)))}),[g]);const[L,U]=(0,l.useState)(!1);return console.log("onePost"),console.log(E),(0,v.jsxs)("div",{className:i.dialog,children:[(0,v.jsx)(d.A,{name:"\u0441\u0445\u0435\u043c\u0430 \u043f\u043e\u0441\u0442\u043e\u0432",children:(0,v.jsx)(c.A,{update:async()=>{const e={};for(const[s,o]of V)e[s]=o;await y({_id:o,colorCodes:e})},create:()=>{U(!0)}})}),(0,v.jsx)(S.A,{open:L,setOpen:U,organizationId:o}),N?(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(m.A,{Error:N})}):(0,v.jsx)("div",{className:i.main,children:x||p?(0,v.jsx)(m.A,{Loading:p,Fetching:x}):(0,v.jsx)(v.Fragment,{children:0===u.length?(0,v.jsxs)("div",{className:i.header,children:[(0,v.jsx)("h1",{className:i.boldText,children:"\u041f\u043e\u0441\u0442\u044b \u043e\u0442\u0441\u0443\u0442\u0441\u0432\u0443\u044e\u0442"}),(0,v.jsx)(r.A,{icon:(0,v.jsx)("img",{src:f.A,alt:"back",style:{width:20,height:20}}),type:"primary",tooltip:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0434",onClick:h,style:{insetInlineEnd:94}})]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:i.header,children:[(0,v.jsx)("h1",{className:i.boldText,children:D.postName}),(0,v.jsx)("h2",{className:i.boldText,children:D.divisionName}),(0,v.jsx)("h3",{children:D.fullName})]}),(0,v.jsx)("div",{className:i.wrapper,children:F?(0,v.jsxs)(v.Fragment,{children:[null===(e=E[0])||void 0===e||null===(s=e.children)||void 0===s?void 0:s.map((e=>(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(j,{post:e,backgroundColor:E[0].color,setOnePost:I,setViewChildrenPost:M,setHeader:$},e.id)}))),(0,v.jsx)(r.A,{icon:(0,v.jsx)("img",{src:f.A,alt:"back",style:{width:20,height:20}}),type:"primary",tooltip:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0434",onClick:()=>M(!1),style:{insetInlineEnd:94}})]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(O,{posts:z,arrayColors:V,setArrayColors:T,setOnePost:I,setViewChildrenPost:M,setHeader:$}),(0,v.jsx)(r.A,{icon:(0,v.jsx)("img",{src:f.A,alt:"back",style:{width:20,height:20}}),type:"primary",tooltip:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0434",onClick:h,style:{insetInlineEnd:94}})]})})]})})})]})}}}]);
//# sourceMappingURL=171.c90aad80.chunk.js.map