"use strict";(self.webpackChunkgood_management=self.webpackChunkgood_management||[]).push([[331],{543:(e,t,a)=>{a.d(t,{A:()=>l});a(5043);const l=a.p+"static/media/statisticsArrowLeft.f7936a0e8650e337baf9f5e86cf7fa65.svg"},997:(e,t,a)=>{a.d(t,{A:()=>s});var l=a(5043);const i={ul:"Lupa_ul__62RG9",li:"Lupa_li__pnKTR",activeText:"Lupa_activeText__DK-A7",completedText:"Lupa_completedText__68tEA"};var n=a(5933),r=a(579);function s(e){let{setIsOpenSearch:t,isOpenSearch:a,select:s,projects:o,archivesProjects:c,projectsWithProgram:d,archivesProjectsWithProgram:u,programs:v,archivesPrograms:m,array:h,arrayItem:p,positionBottomStyle:D}=e;const g=(0,l.useRef)(null);return(0,l.useEffect)((()=>{const e=e=>{g.current&&!g.current.contains(e.target)&&t(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]),(0,r.jsxs)("div",{ref:g,children:[(0,r.jsx)("img",{src:n.A,alt:"subbarSearch",onClick:()=>{t(!0)}}),a&&(0,r.jsxs)("ul",{className:i.ul,style:{bottom:D},children:[0!==(null===o||void 0===o?void 0:o.length)&&o&&(0,r.jsx)("li",{value:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435",disabled:!0,className:i.activeText,children:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435"}),null===o||void 0===o?void 0:o.map((e=>(0,r.jsx)("li",{value:e.id,onClick:()=>{s(e.id),t(!1)},className:i.li,children:e.projectName},e.id))),0!==(null===c||void 0===c?void 0:c.length)&&c&&(0,r.jsx)("li",{value:"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044b\u0435",disabled:!0,className:i.completedText,children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044b\u0435"}),null===c||void 0===c?void 0:c.map((e=>(0,r.jsx)("li",{value:e.id,className:i.li,onClick:()=>{s(e.id),t(!1)},children:e.projectName},e.id))),0!==(null===d||void 0===d?void 0:d.length)&&d&&(0,r.jsx)("li",{value:"\u041f\u0440\u043e\u0435\u043a\u0442\u044b \u0441 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430\u043c\u0438",disabled:!0,className:i.activeText,children:"\u041f\u0440\u043e\u0435\u043a\u0442\u044b \u0441 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430\u043c\u0438"}),null===d||void 0===d?void 0:d.map((e=>(0,r.jsx)("li",{value:e.id,onClick:()=>{s(e.id),t(!1)},className:i.li,children:e.projectName},e.id))),0!==(null===u||void 0===u?void 0:u.length)&&u&&(0,r.jsx)("li",{value:"\u0410\u0440\u0445\u0438\u0432\u043d\u044b\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u044b \u0441 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430\u043c\u0438",disabled:!0,className:i.completedText,children:"\u0410\u0440\u0445\u0438\u0432\u043d\u044b\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u044b \u0441 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430\u043c\u0438"}),null===u||void 0===u?void 0:u.map((e=>(0,r.jsx)("li",{value:e.id,onClick:()=>{s(e.id),t(!1)},className:i.li,children:e.projectName},e.id))),0!==(null===v||void 0===v?void 0:v.length)&&v&&(0,r.jsx)("li",{value:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435",disabled:!0,className:i.activeText,children:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435"}),null===v||void 0===v?void 0:v.map((e=>(0,r.jsx)("li",{value:e.id,onClick:()=>{s(e.id),t(!1)},className:i.li,children:e.projectName},e.id))),0!==(null===m||void 0===m?void 0:m.length)&&m&&(0,r.jsx)("li",{value:"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044b\u0435",disabled:!0,className:i.completedText,children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044b\u0435"}),null===m||void 0===m?void 0:m.map((e=>(0,r.jsx)("li",{value:e.id,onClick:()=>{s(e.id),t(!1)},className:i.li,children:e.projectName},e.id))),null===h||void 0===h?void 0:h.map((e=>(0,r.jsx)("li",{value:e.id,onClick:()=>{s(e.id),t(!1)},className:i.li,children:e[p]},e.id)))]})]})}},1268:(e,t,a)=>{a.d(t,{A:()=>d});a(5043);const l={editText:"BottomHeaders_editText__BUuuG"},i={wrapper:"ButtonAction_wrapper__S7EYo"};var n=a(3732),r=a(4530),s=a(9307),o=a(579);function c(e){let{create:t,update:a}=e;return(0,o.jsxs)("div",{className:i.wrapper,children:[t&&(0,o.jsx)(s.A,{name:"\u0441\u043e\u0437\u0434\u0430\u0442\u044c",icon:n.A,onClick:t}),a&&(0,o.jsx)(s.A,{name:"\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c",icon:r.A,onClick:a})]})}function d(e){let{children:t,create:a,update:i}=e;return(0,o.jsxs)("div",{className:l.editText,children:[t,(0,o.jsx)(c,{create:a,update:i})]})}},1331:(e,t,a)=>{a.r(t),a.d(t,{default:()=>F});var l=a(5043);const i={dialog:"Statistic_dialog__Cbu9i",header:"Statistic_header__pH+-5",fon:"Statistic_fon__JP7td",pomoshnikSearch:"Statistic_pomoshnikSearch__qnBb-",pomoshnik:"Statistic_pomoshnik__CQ0BG",iconBack:"Statistic_iconBack__m2V0j",search:"Statistic_search__TXcQi",spanPomoshnik:"Statistic_spanPomoshnik__6J8Y+",editText:"Statistic_editText__II05V",five:"Statistic_five__HK9Ts",iconAdd:"Statistic_iconAdd__MdvSu",iconSave:"Statistic_iconSave__Jua1O",image:"Statistic_image__3-PtP",main:"Statistic_main__SPIYw",blockArrrow:"Statistic_blockArrrow__tzFtl",block1:"Statistic_block1__UhU-B",block2:"Statistic_block2__8rOtS",block3:"Statistic_block3__LMeol",row2:"Statistic_row2__JK97+",row1:"Statistic_row1__lEqBa",element:"Statistic_element__SqAT-",addPoint:"Statistic_addPoint__DMwyp",deletePoint:"Statistic_deletePoint__ZllQj",points:"Statistic_points__qGb+h",item:"Statistic_item__x1Ly9",date:"Statistic_date__4vcFZ",number:"Statistic_number__AuAix",textGrey:"Statistic_textGrey__z7nKi",modal:"Statistic_modal__nbKgB",modalTable:"Statistic_modalTable__RWkRw",exitImage:"Statistic_exitImage__SmwEo",row:"Statistic_row__sT2iA",tableHeader:"Statistic_tableHeader__HNfWg",iconSaveModal:"Statistic_iconSaveModal__j06O9",itemHover:"Statistic_itemHover__BSWPU",active:"Statistic_active__BNbuW",itemName:"Statistic_itemName__DSZe6",select:"Statistic_select__yamP1",div:"Statistic_div__KBisZ",modalDelete:"Statistic_modalDelete__NWOfQ",modalDeleteElement:"Statistic_modalDeleteElement__iXQ6s",modalRow1:"Statistic_modalRow1__PnjBy",modalRow2:"Statistic_modalRow2__yZiju",btnYes:"Statistic_btnYes__5f-7E",btnNo:"Statistic_btnNo__3W1rx",textBtnYes:"Statistic_textBtnYes__z+BO-",textBtnNo:"Statistic_textBtnNo__Yjm0V",text:"Statistic_text__Lz4Hv",textMontserrat:"Statistic_textMontserrat__hbHUe",tableHeading:"Statistic_tableHeading__PlauL",tableHintWrapper:"Statistic_tableHintWrapper__N4ykR"};var n=a(9103);const r={block:"Graphic_block__5hOFr",row1:"Graphic_row1__I9Rbv"};var s=a(8053),o=a(579);const c=e=>{let{colorFirstPoint:t,data:a,name:i,setName:c,typeGraphic:d,type:u}=e;const v=(0,l.useRef)(),[m,h]=(0,l.useState)(i),[p,D]=(0,l.useState)(880),[g,x]=(0,l.useState)(600);return(0,l.useEffect)((()=>{h(i)}),[i]),(0,l.useEffect)((()=>{c(m)}),[m]),(0,l.useEffect)((()=>{const e=()=>{let e,t;"26"!==d&&d?"52"===d?window.innerWidth>1400?(e=1200,t=600):window.innerWidth>800&&(e=880,t=400):window.innerWidth>1400?(e=500,t=600):window.innerWidth>800&&(e=400,t=400):window.innerWidth>1400?(e=900,t=600):window.innerWidth>800&&(e=700,t=400),D(e),x(t)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[d]),(0,l.useEffect)((()=>{a.sort(((e,t)=>new Date(e.valueDate)-new Date(t.valueDate)));const e=40,l=30,i=80,r=50,o=(n.jkA(a,(e=>e.value)),1.1*n.T9B(a,(e=>e.value))),c=n.hqK().domain(a.map((e=>""===e.valueDate||null===e.valueDate?"\u0434\u0430\u0442\u0430":(0,s.A)(e.valueDate,d)))).range([r,p-l]).padding(0),m="\u041e\u0431\u0440\u0430\u0442\u043d\u0430\u044f"===u?n.m4Y().domain([0,o]).nice().range([e,g-i]):n.m4Y().domain([0,o]).nice().range([g-i,e]),h=n.n8j().x((e=>c(""===e.valueDate||null===e.valueDate?"\u0434\u0430\u0442\u0430":(0,s.A)(e.valueDate,d)))).y((e=>m(e.value))).defined((e=>null!==e.value));n.Ltv(v.current).selectAll("*").remove();const D=n.Ltv(v.current).attr("width",p).attr("height",g),x=a.map((e=>""===e.valueDate||null===e.valueDate?"\u0434\u0430\u0442\u0430":(0,s.A)(e.valueDate,d))),S=m.ticks(5);D.selectAll(".grid-vertical").data(x).enter().append("line").attr("class","grid-vertical").attr("x1",(e=>c(e))).attr("x2",(e=>c(e))).attr("y1",e).attr("y2",g-i).attr("stroke","#4a4a4a").attr("stroke-width",1).attr("opacity",.3),D.selectAll(".grid-horizontal").data(S).enter().append("line").attr("class","grid-horizontal").attr("x1",r).attr("x2",p-l).attr("y1",(e=>m(e))).attr("y2",(e=>m(e))).attr("stroke","#4a4a4a").attr("stroke-width",1).attr("opacity",.3);const _=n.l78(c);D.append("g").attr("transform",`translate(0,${g-i})`).call(_).selectAll("text").attr("transform","rotate(-90)").attr("text-anchor","end").attr("dx","-10px").attr("dy","-5px").style("font-weight","bold").style("font-size","12px"),D.append("g").attr("transform",`translate(${r},0)`).call(n.V4s(m).ticks(5).tickFormat(n.GPZ(".2s"))),a.forEach(((e,t)=>{if(t>0){const l=a[t-1].value,i="\u041e\u0431\u0440\u0430\u0442\u043d\u0430\u044f"===u?e.value<l?"blue":"red":e.value<l?"red":"blue";D.append("path").datum([a[t-1],e]).attr("fill","none").attr("stroke",i).attr("stroke-width",2).attr("d",h)}}));const w=(e,l)=>{if(0===l){if(void 0===t||null===t)return"blue";return e>=t?"blue":"red"}if(l>0){const t=a[l-1].value;return"\u041e\u0431\u0440\u0430\u0442\u043d\u0430\u044f"===u?e<t?"blue":"red":e<t?"red":"blue"}return"blue"};D.selectAll("circle").data(a).enter().append("circle").attr("cx",(e=>c(""===e.valueDate||null===e.valueDate?"\u0434\u0430\u0442\u0430":(0,s.A)(e.valueDate,d)))).attr("cy",(e=>m(e.value))).attr("r",5).attr("fill",((e,t)=>w(e.value,t))).on("mouseover",((t,i)=>{n.Ltv(t.currentTarget).attr("r",7).attr("fill","orange");const o=c(""===i.valueDate||null===i.valueDate?"\u0434\u0430\u0442\u0430":(0,s.A)(i.valueDate,d)),u=m(i.value)-15,v=`\u0414\u0430\u0442\u0430: ${""===i.valueDate||null===i.valueDate?"\u0434\u0430\u0442\u0430":(0,s.A)(i.valueDate,d)}`,h=`\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435: ${i.value}`,g=6*Math.max(v.length,h.length),x=Math.max(120,g+20),S=u-50<e;let _=o;o+x/2>p-l?_=p-l-x/2:o-x/2<r&&(_=r+x/2);const y=S?u+50:u,f=w(i.value,a.indexOf(i)),j=D.append("g").attr("id","tooltip").attr("transform",`translate(${_}, ${y})`);j.append("rect").attr("x",-x/2).attr("y",S?0:-50).attr("width",x).attr("height",50).attr("fill",f).attr("rx",4).attr("ry",4),j.append("text").attr("text-anchor","middle").attr("y",S?15:-30).style("font-size","11px").style("fill","white").style("font-family","Montserrat, sans-serif").text(v),j.append("text").attr("text-anchor","middle").attr("y",S?35:-10).style("font-size","11px").style("fill","white").style("font-family","Montserrat, sans-serif").text(h)})).on("mouseout",(e=>{const t=n.Ltv(e.currentTarget).datum(),l=a.indexOf(t);n.Ltv(e.currentTarget).attr("r",5).attr("fill",w(t.value,l)),D.select("#tooltip").remove()}))}),[t,a,p,g,u]),(0,o.jsxs)("div",{className:r.block,children:[(0,o.jsx)("input",{type:"text",value:m,onChange:e=>h(e.target.value),className:r.row1}),(0,o.jsx)("svg",{ref:v,className:r.row2})]})};var d=a(4530),u=a(543),v=a(3066);const m=a.p+"static/media/trash.cf4b0aaeea7b410bb3b8b02d2a07d42f.svg";var h=a(3732);const p=a.p+"static/media/hint.1f3f74bf4d860dbe71cd17cb76c1ec1d.svg";var D=a(6537),g=a(71),x=a(7583),S=a(7214),_=a(7643),w=a(1268),y=a(2941),f=a(917),j=a(997),N=a(7321),b=a(8877),T=a(3536),k=a.n(T);function F(){var e,t,a,n,r,T,F,M,A,Y,I,$,O,C,E,L;const[P,R]=(0,l.useState)(),{reduxSelectedOrganizationId:B,reduxSelectedOrganizationReportDay:W,currentOrganization:z,isLoadingOrganizationId:G,isFetchingOrganizationId:H,updateOrganization:U,isLoadingUpdateOrganizationMutation:K,isSuccessUpdateOrganizationMutation:J,isErrorUpdateOrganizationMutation:V,ErrorOrganization:Z,localIsResponseUpdateOrganizationMutation:q}=(0,b.wL)(),[Q,X]=(0,l.useState)(!1),[ee,te]=(0,l.useState)(!1),[ae,le]=(0,l.useState)(""),[ie,ne]=(0,l.useState)(),[re,se]=(0,l.useState)(),[oe,ce]=(0,l.useState)(),[de,ue]=(0,l.useState)(""),[ve,me]=(0,l.useState)([]),[he,pe]=(0,l.useState)([]),[De,ge]=(0,l.useState)([]),[xe,Se]=(0,l.useState)(W);(0,l.useEffect)((()=>{void 0!==W&&null!==W&&Se(W)}),[W]);const[_e,we]=(0,l.useState)("\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439"),[ye,fe]=(0,l.useState)(!1),[je,Ne]=(0,l.useState)([]),[be,Te]=(0,l.useState)([]),[ke,Fe]=(0,l.useState)(!1),[Me,Ae]=(0,l.useState)(null),[Ye,Ie]=(0,l.useState)(0),[$e,Oe]=(0,l.useState)(!1),[Ce,Ee]=(0,l.useState)(),[Le,Pe]=(0,l.useState)(),[Re,Be]=(0,l.useState)([]),{statistics:We,isLoadingGetStatistics:ze,isFetchingGetStatistics:Ge,isErrorGetStatistics:He,currentStatistic:Ue,statisticDatas:Ke,isLoadingGetStatisticId:Je,isErrorGetStatisticId:Ve,isFetchingGetStatisticId:Ze,updateStatistics:qe,isLoadingUpdateStatisticMutation:Qe,isSuccessUpdateStatisticMutation:Xe,isErrorUpdateStatisticMutation:et,ErrorUpdateStatisticMutation:tt,localIsResponseUpdateStatisticsMutation:at,postStatistics:lt,isLoadingPostStatisticMutation:it,isSuccessPostStatisticMutation:nt,isErrorPostStatisticMutation:rt,ErrorPostStatisticMutation:st,localIsResponsePostStatisticsMutation:ot}=(0,b.SE)({statisticData:!0,statisticId:ae}),{allPosts:ct,isLoadingGetPosts:dt,isErrorGetPosts:ut}=(0,b.es)(),{selectedID:vt,handleRadioChange:mt,handleInputChangeModalSearch:ht,filterArraySearchModal:pt,inputSearchModal:Dt}=(0,b.I7)({array:ct,arrayItem:"postName"}),gt=(e,t,a,l,i)=>{if("received"===e){const e=[...ve];e[l][a]="value"===a?Number(t):t,me(e)}else ge((e=>{const l=e.map((e=>e.id===i?"value"===a?{...e,value:Number(t)}:{...e,valueDate:t}:e));return l.sort(((e,t)=>Date.parse(t.valueDate)-Date.parse(e.valueDate))),l}))};const xt=async()=>{var e;const t={};if(0!=Object.keys(Ue).length){if(re!==(null===Ue||void 0===Ue?void 0:Ue.type)&&(t.type=re),ie!==(null===Ue||void 0===Ue?void 0:Ue.name)&&(t.name=ie),oe!==(null===Ue||void 0===Ue||null===(e=Ue.post)||void 0===e?void 0:e.id)&&(t.postId=oe),de!==(null===Ue||void 0===Ue?void 0:Ue.description)&&(t.description=de),De.length>0){const e=De.filter((e=>""!==e.value));if(e.length>0){const a=e.map((e=>({value:e.value,valueDate:new Date(e.valueDate)})));t.statisticDataCreateDtos=a}}if(ve.length>0){const e=function(e,t){const a=[];return t.forEach((t=>{const l=e.find((e=>e.id===t.id));if(l){const e={};["value","valueDate"].forEach((a=>{t[a]!==l[a]&&(e[a]="valueDate"==a?new Date(t[a]):t[a])})),Object.keys(e).length>0&&a.push({_id:t.id,...e})}})),a}(he,ve);e.length>0&&(t.statisticDataUpdateDtos=[],t.statisticDataUpdateDtos.push(...e))}Object.keys(t).length>0&&await qe({statisticId:ae,_id:ae,...t}).unwrap().then((()=>{t.name,Oe(!1)})).catch((e=>{console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",JSON.stringify(e,null,2))}))}};(0,l.useEffect)((()=>{fe("\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439"!==_e)}),[_e]),(0,l.useEffect)((()=>{var e;null!==Ue&&void 0!==Ue&&Ue.name&&ne(Ue.name),null!==Ue&&void 0!==Ue&&Ue.type&&se(Ue.type),null!==Ue&&void 0!==Ue&&Ue.description&&ue(Ue.description),null!==Ue&&void 0!==Ue&&null!==(e=Ue.post)&&void 0!==e&&e.id&&ce(Ue.post.id)}),[Ue.id]);const St=()=>{const e=Ke.reduce(((e,t)=>{const a=new Date(t.valueDate),l=`${a.getFullYear()}-${a.getMonth()+1}`;var i;!isNaN(a)&&"\u0413\u043e\u0434"!==(null===t||void 0===t?void 0:t.correlationType)&&new Date((new Date).setFullYear((new Date).getFullYear()-12+Ye))<a&&("\u041c\u0435\u0441\u044f\u0446"===(null===t||void 0===t?void 0:t.correlationType)&&(e[l]={id:t.id,valueSum:t.value,year:a.getFullYear(),month:a.getMonth()+1,correlationType:"\u041c\u0435\u0441\u044f\u0446"}),e[l]||(e[l]={valueSum:0,year:a.getFullYear(),month:a.getMonth()+1}),null!==(i=e[l])&&void 0!==i&&i.correlationType||(e[l].valueSum+=t.value));return e}),{});return Object.keys(e).map((t=>{const{id:a,valueSum:l,year:i,month:n,correlationType:r}=e[t];return{id:a||null,valueDate:`${i}-${n}-${new Date(i,n,0).getDate()}`,value:l,correlationType:r}}))};(0,l.useEffect)((()=>{if(Ke.length){if(me([]),ge([]),pe([]),Ne([]),Te([]),Ie(0),Be([]),"\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439"===_e){var e;const t=new Date,a=t.getDay(),l=new Date(t);let i;i=a>=xe?a-xe:7-(xe-a),l.setDate(t.getDate()-i);const n=new Date(l);n.setDate(l.getDate()+7);const r=[];for(let e=new Date(l);e<n;e.setDate(e.getDate()+1))r.push(new Date(e).toISOString().split("T")[0]);const s=null===Ke||void 0===Ke||null===(e=Ke.filter((e=>{const t=null!==e&&void 0!==e&&e.valueDate?new Date(e.valueDate):null;if(isNaN(null===t||void 0===t?void 0:t.getTime()))return!1;const a=l instanceof Date&&!isNaN(l.getTime()),i=n instanceof Date&&!isNaN(n.getTime());if(!a||!i)return!1;const r=t.toISOString().split("T")[0],s=l.toISOString().split("T")[0],o=n.toISOString().split("T")[0];return s<=r&&r<o&&null===e.correlationType})))||void 0===e?void 0:e.map((e=>{var t;return{...e,valueDate:null===(t=e.valueDate)||void 0===t?void 0:t.split("T")[0]}})),o=[],c=[],d=[];r.forEach((e=>{const t=s.find((t=>t.valueDate===e));t?(o.push(t),c.push({...t})):d.push({id:e,valueDate:e,value:""})})),o.sort(((e,t)=>new Date(t.valueDate)-new Date(e.valueDate))),c.sort(((e,t)=>new Date(t.valueDate)-new Date(e.valueDate))),d.sort(((e,t)=>new Date(t.valueDate)-new Date(e.valueDate))),pe(c),me(o),ge(d),_t(l)}if("\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439"===_e){const e=Ke.filter((e=>"\u041c\u0435\u0441\u044f\u0446"===e.correlationType));Be(e);const a=Ke.reduce(((e,t)=>{const a=new Date(t.valueDate),l=`${a.getFullYear()}-${a.getMonth()+1}`;var i;!isNaN(a)&&"\u0413\u043e\u0434"!==(null===t||void 0===t?void 0:t.correlationType)&&new Date((new Date).setMonth((new Date).getMonth()-13))<a&&("\u041c\u0435\u0441\u044f\u0446"===(null===t||void 0===t?void 0:t.correlationType)&&(e[l]={id:t.id,valueSum:t.value,year:a.getFullYear(),month:a.getMonth()+1,correlationType:"\u041c\u0435\u0441\u044f\u0446"}),e[l]||(e[l]={valueSum:0,year:a.getFullYear(),month:a.getMonth()+1}),null!==(i=e[l])&&void 0!==i&&i.correlationType||(e[l].valueSum+=t.value));return e}),{}),l=[];for(let i=0;i<13;i++){var t;const e=new Date;e.setMonth(e.getMonth()-i);const n=`${e.getFullYear()}-${e.getMonth()+1}`;a[n]||(a[n]={valueSum:0,year:e.getFullYear(),month:e.getMonth()+1});const r=new Date(e.getFullYear(),e.getMonth()+1,0),s=r.getFullYear(),o=r.getMonth()+1,c=r.getDate();l.push({id:(null===(t=a[n])||void 0===t?void 0:t.id)||null,valueDate:`${s}-${o}-${c}`,value:a[n].valueSum,...a[n].correlationType?{correlationType:a[n].correlationType}:{}})}l.sort(((e,t)=>new Date(t.valueDate)-new Date(e.valueDate))),me(l),_t()}if("\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439"===_e){const e=Ke.filter((e=>"\u0413\u043e\u0434"===e.correlationType));Be(e);const t=St(),l=null===Ke||void 0===Ke?void 0:Ke.filter((e=>"\u0413\u043e\u0434"===e.correlationType&&(new Date).getFullYear()-12<new Date(e.valueDate).getFullYear())),i=t.reduce(((e,t)=>{var a;const i=new Date(t.valueDate),n=`${i.getFullYear()}`,r=l.find((e=>new Date(e.valueDate).getFullYear()===i.getFullYear()));return r&&!e[n]?(e[n]={id:t.id,valueSum:r.value,correlationType:r.correlationType},e):(e[n]||(e[n]={valueSum:0,year:i.getFullYear()}),null!==(a=e[n])&&void 0!==a&&a.correlationType||(e[n].valueSum+=t.value),e)}),{}),n=l.reduce(((e,t)=>{const a=new Date(t.valueDate),l=`${a.getFullYear()}`;return new Date((new Date).setFullYear((new Date).getFullYear()-12))<a&&(e[l]||(e[l]={id:t.id,valueSum:t.value,correlationType:t.correlationType})),e}),{}),r=k().merge({},i,n),s=[];for(let o=0;o<12;o++){var a;const e=new Date;e.setFullYear(e.getFullYear()-o);const t=`${e.getFullYear()}`;r[t]||(r[t]={valueSum:0,year:e.getFullYear()}),s.push({id:(null===(a=r[t])||void 0===a?void 0:a.id)||null,valueDate:`${e.getFullYear()}-01-01`,value:r[t].valueSum,...r[t].correlationType?{correlationType:r[t].correlationType}:{}})}s.sort(((e,t)=>new Date(t.valueDate)-new Date(e.valueDate))),me(s),_t()}if("13"===_e||"26"===_e||"52"===_e){const e=new Date,t=new Date(e),a=new Date;a.setDate(e.getDate()-7*(Number(_e)+1));const l=parseInt(xe);if(isNaN(l))throw new Error("selectedDayOfWeek \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0447\u0438\u0441\u043b\u043e\u043c.");const i=[];let n=new Date(a);for(;n.getDay()!==l;)n.setDate(n.getDate()+1);for(;n<=t;){const t=new Date(n);t.setDate(n.getDate()+7);const a=Ke.filter((e=>{const a=new Date(e.valueDate),l=n<=a&&a<t&&null===e.correlationType;return l&&Ne((t=>[...t,e])),l})).reduce(((e,t)=>e+t.value),0),l=new Date(t.getTime()+864e5);l<=e&&(Ne((e=>e.map((e=>e.myID?{...e}:{...e,myID:l.toISOString().split("T")[0]})))),i.push({value:a,valueDate:l.toISOString().split("T")[0]})),n=t}me(i.sort(((e,t)=>new Date(t.valueDate)-new Date(e.valueDate))))}}}),[Ue.id,Je,Ze,_e]);const _t=e=>{if("\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439"===_e){const t=new Date(e);t.setDate(t.getDate()+(Ye-1));const a=Ke.find((e=>new Date(e.valueDate).toISOString().split("T")[0]===t.toISOString().split("T")[0]));R(null===a||void 0===a?void 0:a.value)}if("\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439"===_e){const e=Ke.reduce(((e,t)=>{const a=new Date(t.valueDate),l=`${a.getFullYear()}-${a.getMonth()+1}`,i=new Date;i.setMonth(i.getMonth()-13+Ye);const n=new Date;var r;(n.setMonth(n.getMonth()-12+Ye),!isNaN(a)&&"\u0413\u043e\u0434"!==(null===t||void 0===t?void 0:t.correlationType)&&a>=i&&a<=n)&&("\u041c\u0435\u0441\u044f\u0446"===(null===t||void 0===t?void 0:t.correlationType)&&(e[l]={id:t.id,valueSum:t.value,year:a.getFullYear(),month:a.getMonth()+1,correlationType:"\u041c\u0435\u0441\u044f\u0446"}),e[l]||(e[l]={valueSum:0,year:a.getFullYear(),month:a.getMonth()+1}),null!==(r=e[l])&&void 0!==r&&r.correlationType||(e[l].valueSum+=t.value));return e}),{}),t=Object.values(e)[0];console.log("firstMonthData",t),t&&R(t.valueSum)}if("\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439"===_e){const e=St(),t=(new Date).getFullYear()-12+Ye,a=null===Ke||void 0===Ke?void 0:Ke.filter((e=>"\u0413\u043e\u0434"===e.correlationType&&t==new Date(e.valueDate).getFullYear())),l=e.reduce(((e,t)=>{var l;const i=new Date(t.valueDate),n=`${i.getFullYear()}`,r=a.find((e=>new Date(e.valueDate).getFullYear()===i.getFullYear()));return r&&!e[n]?(e[n]={id:t.id,valueSum:r.value,correlationType:r.correlationType},e):(e[n]||(e[n]={valueSum:0,year:i.getFullYear()}),null!==(l=e[n])&&void 0!==l&&l.correlationType||(e[n].valueSum+=t.value),e)}),{}),i=a.reduce(((e,a)=>{const l=new Date(a.valueDate).getFullYear(),i=`${l}`;return t===l&&(e[i]||(e[i]={id:a.id,valueSum:a.value,correlationType:a.correlationType})),e}),{}),n=k().merge({},l,i),r=Object.values(n)[0];console.log("firstYearData",r),r&&R(r.valueSum)}};(0,l.useEffect)((()=>{(()=>{if(me([]),Ne([]),Te([]),Be([]),Ke.length){if("\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439"===_e){const e=new Date,t=e.getDay(),a=new Date(e);let l;l=t>=xe?t-xe:7-(xe-t),a.setDate(e.getDate()-l);const i=new Date(e);i.setDate(e.getDate()-7),a<i&&a.setTime(i.getTime());const n=[];for(let u=Ye;u<7+Ye;u++){const t=new Date(a);t.setDate(e.getDate()+u),n.push(t.toISOString().split("T")[0]),u===Ye&&_t(a)}const r=Ke.reduce(((e,t)=>{const a=t.valueDate.split("T")[0];return t.correlationType||(e[a]={...t,valueDate:a}),e}),{}),s=n.map((e=>r[e]&&null===r[e].correlationType?r[e]:{id:e,valueDate:e,value:""})),o=s.filter((e=>""===e.value)),c=s.filter((e=>""!==e.value)),d=c.map((e=>({...e})));pe(d),me(c),ge(o)}if("\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439"===_e){const t=Ke.filter((e=>"\u041c\u0435\u0441\u044f\u0446"===e.correlationType));Be(t);const a=Ke.reduce(((e,t)=>{const a=new Date(t.valueDate),l=`${a.getFullYear()}-${a.getMonth()+1}`;var i;return!isNaN(a)&&new Date((new Date).setMonth((new Date).getMonth()-14+Ye))<a&&("\u041c\u0435\u0441\u044f\u0446"===(null===t||void 0===t?void 0:t.correlationType)&&(e[l]={id:t.id,valueSum:t.value,year:a.getFullYear(),month:a.getMonth()+1,correlationType:"\u041c\u0435\u0441\u044f\u0446"}),e[l]||(e[l]={valueSum:0,year:a.getFullYear(),month:a.getMonth()+1}),null!==(i=e[l])&&void 0!==i&&i.correlationType||(e[l].valueSum+=t.value)),e}),{}),l=[];for(let i=(new Date).getMonth()-14+Ye;i<=Ye;i++){var e;const t=new Date;t.setMonth(t.getMonth()+i);const n=`${t.getFullYear()}-${t.getMonth()+1}`;a[n]||(a[n]={valueSum:0,year:t.getFullYear(),month:t.getMonth()+1});const r=new Date(t.getFullYear(),t.getMonth()+1,0),s=r.getFullYear(),o=r.getMonth()+1,c=r.getDate();l.push({id:(null===(e=a[n])||void 0===e?void 0:e.id)||null,valueDate:`${s}-${o}-${c}`,value:a[n].valueSum,...a[n].correlationType?{correlationType:a[n].correlationType}:{}})}l.sort(((e,t)=>new Date(t.valueDate)-new Date(e.valueDate))),me(l),_t()}if("\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439"===_e){const e=Ke.filter((e=>"\u0413\u043e\u0434"===e.correlationType));Be(e);const a=St(),l=null===Ke||void 0===Ke?void 0:Ke.filter((e=>"\u0413\u043e\u0434"===e.correlationType&&(new Date).getFullYear()-12+Ye<new Date(e.valueDate).getFullYear())),i=a.reduce(((e,t)=>{var a;const i=new Date(t.valueDate),n=`${i.getFullYear()}`,r=l.find((e=>new Date(e.valueDate).getFullYear()===i.getFullYear()));return r&&!e[n]?(e[n]={id:t.id,valueSum:r.value,correlationType:r.correlationType},e):(e[n]||(e[n]={valueSum:0,year:i.getFullYear()}),null!==(a=e[n])&&void 0!==a&&a.correlationType||(e[n].valueSum+=t.value),e)}),{}),n=l.reduce(((e,t)=>{const a=new Date(t.valueDate),l=`${a.getFullYear()}`;return new Date((new Date).setFullYear((new Date).getFullYear()-12+Ye))<a&&(e[l]||(e[l]={id:t.id,valueSum:t.value,correlationType:t.correlationType})),e}),{}),r=k().merge({},i,n),s=[];for(let o=(new Date).getFullYear()-11+Ye;o<=(new Date).getFullYear()+Ye;o++){var t;const e=new Date;e.setFullYear(o);const a=`${e.getFullYear()}`;r[a]||(r[a]={valueSum:0,year:e.getFullYear()}),s.push({id:(null===(t=r[a])||void 0===t?void 0:t.id)||null,valueDate:`${e.getFullYear()}-01-01`,value:r[a].valueSum,...r[a].correlationType?{correlationType:r[a].correlationType}:{}})}s.sort(((e,t)=>new Date(t.valueDate)-new Date(e.valueDate))),console.log("updatedYearPoints",s),me(s)}if("13"===_e||"26"===_e||"52"===_e){const e=new Date;e.setDate(e.getDate()+7*Ye);const t=new Date(e),a=new Date(t);a.setDate(t.getDate()-7*(Number(_e)+1));const l=parseInt(xe),i=[];let n=new Date(a),r=0;for(;n.getDay()!==l;)n.setDate(n.getDate()+1);for(;n<=t;){const t=new Date(n);t.setDate(n.getDate()+7),r=Ke.filter((e=>{const a=new Date(e.valueDate);return n<=a&&a<t&&null===e.correlationType&&Ne((t=>[...t,e])),n<=a&&a<t&&null===e.correlationType})).reduce(((e,t)=>e+t.value),0);const a=new Date(t.getTime()+864e5);a<=e&&(Ne((e=>e.map((e=>e.myID?{...e}:{...e,myID:a.toISOString().split("T")[0]})))),i.push({value:r,valueDate:a.toISOString().split("T")[0]})),n=t}me(i.sort(((e,t)=>new Date(t.valueDate)-new Date(e.valueDate))))}}})()}),[Ye]);const wt=(e,t)=>{switch(Number(e)){case 0:t("\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435");break;case 1:t("\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a");break;case 2:t("\u0412\u0442\u043e\u0440\u043d\u0438\u043a");break;case 3:t("\u0421\u0440\u0435\u0434\u0430");break;case 4:t("\u0427\u0435\u0442\u0432\u0435\u0440\u0433");break;case 5:t("\u041f\u044f\u0442\u043d\u0438\u0446\u0430");break;case 6:t("\u0421\u0443\u0431\u0431\u043e\u0442\u0430")}},yt=async()=>{await U({_id:B,reportDay:Number(xe)}).unwrap().then((()=>{Oe(!1)})).catch((e=>{console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",JSON.stringify(e,null,2))}))},ft=e=>{le(e)};return(0,o.jsxs)("div",{className:i.dialog,children:[(0,o.jsx)(_.A,{name:"\u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430",children:(0,o.jsx)(w.A,{create:()=>{X(!0)},update:()=>{console.log(`reportDay =${xe}`),console.log(`currentOrganization?.reportDay =${null===z||void 0===z?void 0:z.reportDay}`),xe!=(null===z||void 0===z?void 0:z.reportDay)?(Oe(!0),wt(xe,Ee),wt(null===z||void 0===z?void 0:z.reportDay,Pe)):xt()},children:(0,o.jsx)(y.A,{name:"\u041e\u0442\u0447\u0435\u0442\u043d\u044b\u0439 \u0434\u0435\u043d\u044c",value:xe,onChange:Se,array:[{id:1,value:"\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a"},{id:2,value:"\u0412\u0442\u043e\u0440\u043d\u0438\u043a"},{id:3,value:"\u0421\u0440\u0435\u0434\u0430"},{id:4,value:"\u0427\u0435\u0442\u0432\u0435\u0440\u0433"},{id:5,value:"\u041f\u044f\u0442\u043d\u0438\u0446\u0430"},{id:6,value:"\u0421\u0443\u0431\u0431\u043e\u0442\u0430"},{id:0,value:"\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435"}],arrayItem:"value"})})}),(0,o.jsx)("div",{className:i.main,children:He&&ut?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(g.A,{Error:He||ut})}):(0,o.jsx)(o.Fragment,{children:Ve?(0,o.jsx)(g.A,{Error:Ve}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(g.A,{Loading:ze,Fetching:Ge}),(0,o.jsx)(g.A,{Loading:dt}),Ze||Je?(0,o.jsx)(g.A,{Loading:Je,Fetching:Ze}):(0,o.jsxs)(o.Fragment,{children:[Ue.id?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:i.block1,children:[(0,o.jsx)(c,{colorFirstPoint:P,data:[...ve,...De],name:ie,setName:ne,typeGraphic:_e,type:re}),(0,o.jsxs)("div",{className:i.blockArrrow,children:[(0,o.jsx)("div",{className:i.statisticsArrow,children:(0,o.jsx)("img",{src:u.A,alt:"statisticsArrowLeftWhite",onClick:()=>{Ie((e=>e-1))}})}),(0,o.jsx)("div",{className:i.statisticsArrow,children:(0,o.jsx)("img",{src:v.A,alt:"statisticsArrowRightWhite",onClick:()=>{Ie((e=>e+1))}})})]})]}),(0,o.jsxs)("div",{className:i.block2,children:[(0,o.jsx)("div",{className:i.addPoint,onClick:()=>{ge((e=>[{valueDate:"",value:0,id:new Date},...e]))},children:(0,o.jsx)("img",{src:h.A,alt:"addBlock"})}),""!==ae?(0,o.jsxs)("div",{className:i.points,children:[null===De||void 0===De||null===(e=De.sort(((e,t)=>Date.parse(t.valueDate)-Date.parse(e.valueDate))))||void 0===e?void 0:e.map(((e,t)=>(""===e.valueDate&&(e.valueDate=(new Date).toISOString().split("T")[0]),(0,o.jsxs)("div",{className:i.item,children:[(0,o.jsx)("input",{type:"date",value:e.valueDate,onChange:t=>{gt("",t.target.value,"valueDate",null,e.id)},className:i.date}),(0,o.jsx)("input",{type:"text",value:e.value,inputMode:"numeric",placeholder:"\u2014",onChange:t=>{const a=t.target.value.replace(/[^0-9]/g,"");gt("",a,"value",null,e.id)},className:i.number})]},t)))),null===ve||void 0===ve?void 0:ve.map(((e,t)=>"\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439"===_e?(0,o.jsxs)("div",{className:i.item,children:[(0,o.jsx)("input",{type:"date",value:e.valueDate,onChange:e=>{gt("received",e.target.value,"valueDate",t,null)},className:`${i.date}`,disabled:ye}),(0,o.jsx)("input",{type:"text",value:e.value,onChange:e=>{const a=e.target.value.replace(/[^0-9]/g,"");gt("received",a,"value",t,null)},className:i.number,disabled:ye})]},t):(0,o.jsxs)("div",{className:`${i.item}  ${i.itemHover}  ${Me===t?i.active:""}`,onClick:()=>{Ae(t),(e=>{Fe(!0);const t=new Date(e);let a=new Date(e);if("\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439"===_e){const e=Re.filter((e=>new Date(e.valueDate).toDateString()===t.toDateString()));e.length>0?Te(e):Te((e=>[...e,{valueDate:t,value:""}]))}if("\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439"===_e){const e=Re.filter((e=>new Date(e.valueDate).toDateString()===t.toDateString()));e.length>0?Te(e):Te((e=>[...e,{valueDate:t,value:""}]))}if("\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439"!==_e&&"\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439"!==_e){a.setDate(t.getDate()-7);const l=je.filter((t=>t.myID===e)).sort(((e,t)=>new Date(e.valueDate)-new Date(t.valueDate))),i=[];if(l.length<7){for(;a<t;){const e=l.find((e=>new Date(e.valueDate).toDateString()===a.toDateString()));e?i.push(e):i.push({valueDate:a.toISOString(),value:""}),a.setDate(a.getDate()+1)}Te(i)}else Te(l)}})(e.valueDate)},children:[(0,o.jsx)("span",{disabled:ye,className:`${i.date} ${i.textGrey}`,children:(0,s.A)(e.valueDate,_e)}),(0,o.jsx)("span",{className:`${i.number} ${i.textGrey}`,disabled:ye,children:e.value})]},t)))]}):(0,o.jsx)(o.Fragment,{}),(0,o.jsx)("div",{className:i.deletePoint,onClick:()=>{ge((e=>e.slice(0,-1)))},children:(0,o.jsx)("img",{src:m,alt:"trash"})})]}),(0,o.jsxs)("div",{className:i.block3,children:[(0,o.jsxs)("div",{className:i.row1,children:[(0,o.jsx)(f.A,{name:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430",value:ie,onChange:ne,children:(0,o.jsx)(j.A,{setIsOpenSearch:te,isOpenSearch:ee,select:ft,array:We,arrayItem:"name",positionBottomStyle:"0"})}),(0,o.jsx)(y.A,{name:"\u0422\u0438\u043f",value:re,onChange:se,array:[{id:"\u041f\u0440\u044f\u043c\u0430\u044f",value:"\u041f\u0440\u044f\u043c\u0430\u044f"},{id:"\u041e\u0431\u0440\u0430\u0442\u043d\u0430\u044f",value:"\u041e\u0431\u0440\u0430\u0442\u043d\u0430\u044f"}],arrayItem:"value"}),(0,o.jsx)(y.A,{name:"\u041f\u043e\u0441\u0442",value:oe,onChange:ce,array:ct,arrayItem:"postName"}),(0,o.jsx)(y.A,{name:"\u0413\u0440\u0430\u0444\u0438\u043a",value:_e,onChange:we,array:[{id:"\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439",value:"\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439",view:"\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439"},{id:"\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439",value:"\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439",view:"\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439"},{id:"\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439",value:"\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439",view:"\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439"},{id:"13",value:"13",view:"13 \u043d\u0435\u0434\u0435\u043b\u044c"},{id:"26",value:"26",view:"26 \u043d\u0435\u0434\u0435\u043b\u044c"},{id:"52",value:"52",view:"52 \u043d\u0435\u0434\u0435\u043b\u0438"}],arrayItem:"view"})]}),(0,o.jsx)("div",{className:i.row2,children:(0,o.jsx)("textarea",{placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0438: \u0447\u0442\u043e \u0438 \u043a\u0430\u043a \u0441\u0447\u0438\u0442\u0430\u0442\u044c",value:de,onChange:e=>ue(e.target.value),className:i.textMontserrat})})]}),(0,o.jsx)(D.A,{Loading:it,Error:rt&&ot,Success:nt&&ot,textSuccess:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0430",textError:null!==st&&void 0!==st&&null!==(t=st.data)&&void 0!==t&&null!==(a=t.errors)&&void 0!==a&&null!==(n=a[0])&&void 0!==n&&null!==(r=n.errors)&&void 0!==r&&r[0]?st.data.errors[0].errors[0]:null===st||void 0===st||null===(T=st.data)||void 0===T?void 0:T.message}),(0,o.jsx)(D.A,{Loading:Qe,Error:et&&at,Success:Xe&&at,textSuccess:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0430",textError:null!==tt&&void 0!==tt&&null!==(F=tt.data)&&void 0!==F&&null!==(M=F.errors)&&void 0!==M&&null!==(A=M[0])&&void 0!==A&&null!==(Y=A.errors)&&void 0!==Y&&Y[0]?tt.data.errors[0].errors[0]:null===tt||void 0===tt||null===(I=tt.data)||void 0===I?void 0:I.message}),ke&&(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:i.modal,children:(0,o.jsxs)("table",{className:i.modalTable,children:[(0,o.jsxs)("div",{className:i.tableHeader,children:["\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439"===_e||"\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439"===_e?(0,o.jsxs)("div",{className:i.tableHeading,children:[(0,o.jsx)("span",{children:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0437\u0430 \u043c\u0435\u0441\u044f\u0446"}),(0,o.jsx)("div",{className:i.tableHintWrapper,children:(0,o.jsx)("img",{src:p,alt:"hint",className:i.tableHint})})]}):(0,o.jsx)("div",{className:""}),(0,o.jsx)("div",{className:i.iconSaveModal,children:(0,o.jsx)("img",{src:d.A,alt:"Blacksavetmp",className:i.image,onClick:()=>{(async e=>{const t={};if("\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439"===_e||"\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439"===_e)if(e[0].id){const a=e.map((e=>({_id:e.id,value:e.value,valueDate:e.valueDate,..."\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439"===_e?{correlationType:e.correlationType}:{},..."\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439"===_e?{correlationType:e.correlationType}:{}})));t.statisticDataUpdateDtos=a}else{const a=e.map((e=>({...e,valueDate:new Date(e.valueDate),..."\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439"===_e?{correlationType:e.correlationType}:{},..."\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439"===_e?{correlationType:e.correlationType}:{}})));t.statisticDataCreateDtos=a}else{const a=e.filter((e=>""!=e.value)),l=a.filter((e=>!e.id)),i=a.filter((e=>e.id)).map((e=>({_id:e.id,value:e.value,valueDate:e.valueDate})));if(l.length>0){const e=l.map((e=>({...e,valueDate:new Date(e.valueDate)})));t.statisticDataCreateDtos=e}i.length>0&&(t.statisticDataUpdateDtos=i)}await qe({statisticId:ae,_id:ae,...t}).unwrap().then((()=>{Fe(!1),Ae(null)})).catch((e=>{console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",JSON.stringify(e,null,2))}))})(be)}})})]}),(0,o.jsx)("img",{src:x.A,alt:"exit",onClick:()=>{Te([]),Ae(null),Fe(!1)},className:i.exitImage}),(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"\u0414\u0430\u0442\u0430"}),(0,o.jsx)("th",{children:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435"})]})}),(0,o.jsx)("tbody",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:null===be||void 0===be?void 0:be.map((e=>(0,o.jsx)("div",{className:i.row,children:(0,o.jsx)("span",{className:`${i.date} ${i.textGrey}`,children:(0,s.A)(e.valueDate,_e)})},e.id)))}),(0,o.jsx)("td",{children:null===be||void 0===be?void 0:be.map(((e,t)=>(0,o.jsx)("div",{className:i.row,children:(0,o.jsx)("input",{type:"text",inputMode:"numeric",placeholder:"\u2014",value:null===e.value||""===e.value?"":e.value,onChange:e=>{const a=e.target.value.replace(/[^0-9]/g,"");((e,t)=>{if(t<0||t>=be.length)return;const a=be.map((e=>({...e})));a[t]={...a[t],value:null===e?"":Number(e),..."\u0415\u0436\u0435\u0433\u043e\u0434\u043e\u0432\u043e\u0439"===_e?{correlationType:"\u0413\u043e\u0434"}:{},..."\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439"===_e?{correlationType:"\u041c\u0435\u0441\u044f\u0446"}:{}},Te(a)})(""===a?null:a,t)}})},e.id)))})]})})]})})})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(S.A,{letters:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0443"}),(0,o.jsx)("div",{className:i.block1}),(0,o.jsx)("div",{className:i.block2}),(0,o.jsxs)("div",{className:i.block3,children:[(0,o.jsx)("div",{className:i.row1,children:(0,o.jsx)(f.A,{name:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430",value:ie,onChange:ne,children:(0,o.jsx)(j.A,{setIsOpenSearch:te,isOpenSearch:ee,select:ft,array:We,arrayItem:"name",positionBottomStyle:"0"})})}),(0,o.jsx)("div",{className:i.row2,children:(0,o.jsx)("textarea",{disabled:!0,placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0438: \u0447\u0442\u043e \u0438 \u043a\u0430\u043a \u0441\u0447\u0438\u0442\u0430\u0442\u044c"})})]})]}),$e&&(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:i.modalDelete,children:(0,o.jsxs)("div",{className:i.modalDeleteElement,children:[(0,o.jsx)("img",{src:x.A,alt:"exit",className:i.exitImage,onClick:()=>Oe(!1)}),(0,o.jsx)("div",{className:i.modalRow1,children:(0,o.jsxs)("span",{className:i.text,children:["\u0412\u044b \u043f\u043e\u043c\u0435\u043d\u044f\u043b\u0438 \u043e\u0442\u0447\u0435\u0442\u043d\u044b\u0439 \u0434\u0435\u043d\u044c \u0441 ",(0,o.jsx)("span",{children:" "}),(0,o.jsx)("span",{style:{fontWeight:"700"},children:Le}),(0,o.jsx)("span",{children:" \u043d\u0430 "}),(0,o.jsx)("span",{style:{fontWeight:"700"},children:Ce}),". \u0415\u0441\u043b\u0438 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435, \u0442\u043e \u043e\u0442\u0447\u0435\u0442\u043d\u044b\u0439 \u0434\u0435\u043d\u044c \u043f\u043e\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u0443 \u0432\u0441\u0435\u0439 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438."]})}),(0,o.jsxs)("div",{className:i.modalRow2,children:[(0,o.jsx)("button",{className:`${i.btnYes} ${i.textBtnYes}`,onClick:async()=>{try{await yt(),localStorage.setItem("reportDay",Number(xe)),Oe(!1),await new Promise((e=>setTimeout(e,1500))),await xt()}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0438 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439:",e)}},children:"\u0414\u0430"}),(0,o.jsx)("button",{className:`${i.btnNo} ${i.textBtnNo}`,onClick:()=>{xt()},children:"\u041d\u0435\u0442"})]})]})})}),(0,o.jsx)(D.A,{Loading:K,Error:V&&q,Success:J&&q,textSuccess:`\u041e\u0431\u043d\u043e\u0432\u0438\u043b\u0441\u044f \u043e\u0442\u0447\u0435\u0442\u043d\u044b\u0439 \u0434\u0435\u043d\u044c \u0443 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438 \u043d\u0430 ${Ce}`,textError:null!==Z&&void 0!==Z&&null!==($=Z.data)&&void 0!==$&&null!==(O=$.errors)&&void 0!==O&&null!==(C=O[0])&&void 0!==C&&null!==(E=C.errors)&&void 0!==E&&E[0]?Z.data.errors[0].errors[0]:null===Z||void 0===Z||null===(L=Z.data)||void 0===L?void 0:L.message}),Q&&(0,o.jsx)(N.$,{nameTable:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0441\u0442\u0430",handleSearchValue:Dt,handleSearchOnChange:ht,handleRadioChange:mt,exit:()=>{X(!1)},filterArray:pt,array:ct,arrayItem:"postName",selectedItemID:vt,save:async()=>{await lt({name:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430",postId:vt}).unwrap().then((e=>{le(e.id),X(!1)})).catch((e=>{console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",JSON.stringify(e,null,2))}))}})]})]})})})]})}},3066:(e,t,a)=>{a.d(t,{A:()=>l});a(5043);const l=a.p+"static/media/statisticsArrowRight.3daf16467905e170a2a5537d09a742a8.svg"},5933:(e,t,a)=>{a.d(t,{A:()=>l});a(5043);const l=a.p+"static/media/subbarSearch.228587dc2f4983eef0e3a45c32fd687a.svg"},7214:(e,t,a)=>{a.d(t,{A:()=>n});a(5043);const l={wave:"WaveLetters_wave__2Gves"};var i=a(579);function n(e){let{letters:t}=e;const a=t.split("");return(0,i.jsx)("div",{className:l.wave,children:null===a||void 0===a?void 0:a.map(((e,t)=>(0,i.jsx)("span",{style:{"--i":t+1},children:" "===e?"\xa0\xa0":e},t)))})}},7321:(e,t,a)=>{a.d(t,{$:()=>o});a(5043);const l={modal:"ModalSelectRadio_modal__NKc1b",modalWindow:"ModalSelectRadio_modalWindow__5RkFz",header:"ModalSelectRadio_header__6ISO7",item1:"ModalSelectRadio_item1__OXY0f",item2:"ModalSelectRadio_item2__V4lIS",search:"ModalSelectRadio_search__asvAb",exit:"ModalSelectRadio_exit__et8tp",table:"ModalSelectRadio_table__ZIpre",row:"ModalSelectRadio_row__smpE+"};var i=a(7583),n=a(4530),r=a(9307),s=a(579);function o(e){let{nameTable:t,handleSearchValue:a,handleSearchOnChange:o,exit:c,filterArray:d,array:u,arrayItem:v,selectedItemID:m,handleRadioChange:h,save:p}=e;return(0,s.jsx)("div",{className:l.modal,children:(0,s.jsxs)("div",{className:l.modalWindow,children:[(0,s.jsx)("img",{src:i.A,alt:"exitModal",onClick:()=>c(),className:l.exit}),(0,s.jsxs)("div",{className:l.header,children:[(0,s.jsx)("div",{className:l.item1,children:(0,s.jsx)("input",{type:"search",placeholder:"\u041d\u0430\u0439\u0442\u0438",value:a,onChange:o,className:l.search})}),p&&(0,s.jsx)("div",{className:l.item2,children:(0,s.jsx)(r.A,{name:"\u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",icon:n.A,onClick:p})})]}),(0,s.jsxs)("table",{className:l.table,children:[(0,s.jsx)("thead",{children:(0,s.jsx)("tr",{children:(0,s.jsx)("th",{children:t})})}),d.length>0?(0,s.jsx)("tbody",{children:(0,s.jsx)("tr",{children:(0,s.jsx)("td",{children:null===d||void 0===d?void 0:d.map((e=>(0,s.jsxs)("div",{className:l.row,onClick:()=>h(e.id,e),children:[(0,s.jsx)("input",{type:"radio",checked:m===e.id}),e[v]]},e.id)))})})}):(0,s.jsx)("tbody",{children:(0,s.jsx)("tr",{children:(0,s.jsx)("td",{children:null===u||void 0===u?void 0:u.map((e=>(0,s.jsxs)("div",{className:l.row,onClick:()=>h(e.id,e),children:[(0,s.jsx)("input",{type:"radio",checked:m===e.id}),e[v]]},e.id)))})})})]})]})})}}}]);
//# sourceMappingURL=331.e43e7ee5.chunk.js.map