"use strict";(self.webpackChunkgood_management=self.webpackChunkgood_management||[]).push([[936],{1268:(e,a,o)=>{o.d(a,{A:()=>c});o(5043);const t={editText:"BottomHeaders_editText__BUuuG"},n={wrapper:"ButtonAction_wrapper__S7EYo"};var r=o(3732),l=o(4530),s=o(9307),i=o(579);function d(e){let{create:a,update:o}=e;return(0,i.jsxs)("div",{className:n.wrapper,children:[a&&(0,i.jsx)(s.A,{name:"\u0441\u043e\u0437\u0434\u0430\u0442\u044c",icon:r.A,onClick:a}),o&&(0,i.jsx)(s.A,{name:"\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c",icon:l.A,onClick:o})]})}function c(e){let{children:a,create:o,update:n}=e;return(0,i.jsxs)("div",{className:t.editText,children:[a,(0,i.jsx)(d,{create:o,update:n})]})}},1818:(e,a,o)=>{o.d(a,{A:()=>r});o(5043);const t={textArea:"TextArea_textArea__W74x1",textColor:"TextArea_textColor__B5yhy"};var n=o(579);function r(e){let{value:a,onChange:o,readOnly:r}=e;return(0,n.jsx)("textarea",{className:`${t.textArea} ${r?t.textColor:""}`,value:a,onChange:e=>o(e.target.value),disabled:r})}},3936:(e,a,o)=>{o.r(a),o.d(a,{default:()=>h});var t=o(5043);const n={dialog:"Goal_dialog__jFGMl",pomoshnik:"Goal_pomoshnik__ePQSy",iconBack:"Goal_iconBack__Wc5Bu",search:"Goal_search__xHdG5",spanPomoshnik:"Goal_spanPomoshnik__1NtI2",one:"Goal_one__7wuA8",two:"Goal_two__uTpyB",three:"Goal_three__P+Ews",five:"Goal_five__qptc-",seven:"Goal_seven__j53Uu",sixth:"Goal_sixth__z-DOL",iconAdd:"Goal_iconAdd__oG8az",iconSave:"Goal_iconSave__LCDA6",iconPrint:"Goal_iconPrint__vNzpB",image:"Goal_image__vr7vE",blockSelect:"Goal_blockSelect__DBPoO",option:"Goal_option__Me0cN",four:"Goal_four__gOlJn",main:"Goal_main__VnTVT",editorContainer:"Goal_editorContainer__b0ruq",deleteIcon:"Goal_deleteIcon__Y7frA",add:"Goal_add__uWAZJ",nameButton:"Goal_nameButton__yaggP",highlight:"Goal_highlight__nxbMd",selectImage:"Goal_selectImage__ya+Eg",select:"Goal_select__za4Ho"};const r=o.p+"static/media/drag.a3c69099094630ca6a8f439730092be5.svg";const l=o.p+"static/media/delete.02346ff21208123530a54256266a1dcc.svg";var s=o(6537),i=o(71),d=o(9742),c=o(1818),_=o(7643),u=o(1268),x=o(8877),g=o(579);function h(){var e,a,o,h,p,v,G,m,j,f;const[A,L]=(0,t.useState)([]),{reduxSelectedOrganizationId:C,currentGoal:E,isErrorGetGoal:w,isLoadingGetGoal:k,isFetchingGetGoal:y,updateGoal:B,isLoadingUpdateGoalMutation:N,isSuccessUpdateGoalMutation:P,isErrorUpdateGoalMutation:S,ErrorUpdateGoalMutation:b,localIsResponseUpdateGoalMutation:M,postGoal:I,isLoadingPostGoalMutation:O,isSuccessPostGoalMutation:T,isErrorPostGoalMutation:z,ErrorPostGoalMutation:U,localIsResponsePostGoalMutation:F}=(0,x.uE)(),H=()=>{Object.keys(E).length>0?L((e=>[...e,[""]])):(async()=>{await I({content:[""],organizationId:C}).unwrap().then().catch((e=>{console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",JSON.stringify(e,null,2))}))})()};return(0,t.useEffect)((()=>{E.id&&L(E.content)}),[E]),(0,t.useEffect)((()=>{const e=e=>{"Enter"===e.key&&e.ctrlKey&&H()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[]),(0,g.jsxs)("div",{className:n.dialog,children:[(0,g.jsx)(_.A,{name:"\u0446\u0435\u043b\u0438",children:(0,g.jsx)(u.A,{update:async()=>{await B({_id:E.id,content:A}).unwrap().then((()=>{})).catch((e=>{console.error("\u041e\u0448\u0438\u0431\u043a\u0430:",JSON.stringify(e,null,2))}))}})}),(0,g.jsx)("div",{className:n.main,children:w?(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(i.A,{Error:w})}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(i.A,{Loading:k,Fetching:y}),(0,g.jsx)(d.JY,{onDragEnd:e=>{const{source:a,destination:o}=e;if(!o)return;const t=Array.from(A),[n]=t.splice(a.index,1);t.splice(o.index,0,n),L(t)},children:(0,g.jsx)(d.gL,{droppableId:"editorList",children:e=>(0,g.jsxs)("div",{...e.droppableProps,ref:e.innerRef,className:n.droppableContainer,children:[A.map(((e,a)=>(0,g.jsx)(d.sx,{draggableId:`item-${a}`,index:a,children:o=>(0,g.jsxs)("div",{ref:o.innerRef,...o.draggableProps,className:n.editorContainer,children:[(0,g.jsx)("div",{...o.dragHandleProps,className:n.dragHandle,children:(0,g.jsx)("img",{src:r,alt:"drag"})}),(0,g.jsx)(c.A,{value:e,onChange:e=>{const o=[...A];o[a]=e,L(o)}},a),(0,g.jsx)("img",{src:l,alt:"deleteImage",className:n.deleteIcon,onClick:()=>(e=>{L((a=>{const o=[...a];return o.splice(e,1),o}))})(a)})]})},a))),e.placeholder]})})}),(0,g.jsxs)("button",{className:n.add,onClick:()=>H(),children:[(0,g.jsxs)("svg",{width:"19.998047",height:"20.000000",viewBox:"0 0 19.998 20",fill:"none",children:[(0,g.jsx)("defs",{}),(0,g.jsx)("path",{id:"Vector",d:"M10 20C4.47 19.99 0 15.52 0 10L0 9.8C0.1 4.3 4.63 -0.08 10.13 0C15.62 0.07 20.03 4.56 19.99 10.06C19.96 15.56 15.49 19.99 10 20ZM5 9L5 11L9 11L9 15L11 15L11 11L15 11L15 9L11 9L11 5L9 5L9 9L5 9Z",fill:"#B4B4B4","fill-opacity":"1.000000","fill-rule":"nonzero"})]}),(0,g.jsx)("div",{children:(0,g.jsx)("span",{className:n.nameButton,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0435\u0449\u0435 \u043e\u0434\u043d\u0443 \u0447\u0430\u0441\u0442\u044c \u0446\u0435\u043b\u0438 (Ctrl+Enter)"})})]}),(0,g.jsx)(s.A,{Loading:N,Error:S&&M,Success:P&&M,textSuccess:"\u0426\u0435\u043b\u044c \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0430",textError:null!==b&&void 0!==b&&null!==(e=b.data)&&void 0!==e&&null!==(a=e.errors)&&void 0!==a&&null!==(o=a[0])&&void 0!==o&&null!==(h=o.errors)&&void 0!==h&&h[0]?b.data.errors[0].errors[0]:null===b||void 0===b||null===(p=b.data)||void 0===p?void 0:p.message}),(0,g.jsx)(s.A,{Loading:O,Error:z&&F,Success:T&&F,textSuccess:"\u0426\u0435\u043b\u044c \u0441\u043e\u0437\u0434\u0430\u043d\u0430",textError:null!==U&&void 0!==U&&null!==(v=U.data)&&void 0!==v&&null!==(G=v.errors)&&void 0!==G&&null!==(m=G[0])&&void 0!==m&&null!==(j=m.errors)&&void 0!==j&&j[0]?U.data.errors[0].errors[0]:null===U||void 0===U||null===(f=U.data)||void 0===f?void 0:f.message})]})})]})}}}]);
//# sourceMappingURL=936.4b4b7906.chunk.js.map